<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fresh Harvest - Organic Fruits & Vegetables</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4CAF50;
            --primary-dark: #388E3C;
            --secondary: #FF9800;
            --light: #F5F5F5;
            --dark: #212121;
            --gray: #757575;
            --white: #FFFFFF;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f9f9f9;
            color: var(--dark);
        }

        .navbar {
            background-color: var(--white);
            box-shadow: var(--shadow);
        }

        .navbar-brand {
            font-weight: 700;
            color: var(--primary-dark);
        }

        .nav-link {
            color: var(--dark);
            font-weight: 500;
        }

        .nav-link:hover {
            color: var(--primary);
        }

        .btn-primary {
            background-color: var(--primary);
            border-color: var(--primary);
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            border-color: var(--primary-dark);
        }

        .btn-outline-primary {
            color: var(--primary);
            border-color: var(--primary);
        }

        .btn-outline-primary:hover {
            background-color: var(--primary);
            color: var(--white);
        }

        .btn-secondary {
            background-color: var(--secondary);
            border-color: var(--secondary);
        }

        /* Modern Filter Button */
        .filter-toggle-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border: none;
            cursor: pointer;
            transition: var(--transition);
        }

        .filter-toggle-btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
        }

        .filter-toggle-btn i {
            font-size: 1.5rem;
        }

        .filter-toggle-btn .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--secondary);
        }

        /* Filter Panel */
        .filter-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 350px;
            height: 100vh;
            background-color: var(--white);
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            z-index: 1050;
            padding: 20px;
            overflow-y: auto;
            transition: var(--transition);
        }

        .filter-panel.show {
            right: 0;
        }

        .filter-panel .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--gray);
        }

        .filter-section {
            background-color: var(--white);
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 20px;
            margin-bottom: 20px;
        }

        .filter-title {
            font-weight: 600;
            color: var(--primary-dark);
            border-bottom: 2px solid var(--light);
            padding-bottom: 10px;
            margin-bottom: 15px;
        }

        .form-check-label {
            cursor: pointer;
        }

        .form-check-input:checked {
            background-color: var(--primary);
            border-color: var(--primary);
        }

        /* Modern Product Cards */
        .product-card {
            border: none;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            margin-bottom: 25px;
            background-color: var(--white);
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .product-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--secondary);
            color: var(--white);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 1;
        }

        .organic-badge {
            background-color: var(--primary);
        }

        .product-img-container {
            height: 200px;
            overflow: hidden;
            position: relative;
        }

        .product-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .product-card:hover .product-img {
            transform: scale(1.05);
        }

        .product-title {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .product-category {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .product-price {
            font-weight: 700;
            color: var(--primary-dark);
            font-size: 1.2rem;
        }

        .product-old-price {
            text-decoration: line-through;
            color: var(--gray);
            font-size: 0.9rem;
            margin-left: 5px;
        }

        .product-rating {
            color: var(--secondary);
            margin-bottom: 15px;
        }

        /* Modern Buttons */
        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .view-detail-btn {
            border: none;
            background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
            color: var(--dark);
            border-radius: 8px;
            padding: 8px 15px;
            font-weight: 500;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            flex: 1;
        }

        .view-detail-btn:hover {
            background: linear-gradient(135deg, #e0e0e0, #d0d0d0);
            color: var(--dark);
        }

        .add-to-cart-btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: var(--white);
            border: none;
            border-radius: 8px;
            padding: 8px 15px;
            font-weight: 500;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            flex: 1;
            box-shadow: 0 2px 5px rgba(76, 175, 80, 0.3);
        }

        .add-to-cart-btn:hover {
            background: linear-gradient(135deg, var(--primary-dark), #2e7d32);
            color: var(--white);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(76, 175, 80, 0.4);
        }

        .add-to-cart-btn:disabled {
            background: #cccccc;
            transform: none;
            box-shadow: none;
        }

        .apply-filters-btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-weight: 500;
            width: 100%;
            margin-top: 10px;
            transition: var(--transition);
        }

        .apply-filters-btn:hover {
            background: linear-gradient(135deg, var(--primary-dark), #2e7d32);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(76, 175, 80, 0.4);
        }

        /* Overlay for filter panel */
        .filter-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1040;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .filter-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        /* Responsive adjustments */
        @media (max-width: 992px) {
            .filter-panel {
                width: 320px;
            }
        }

        @media (max-width: 768px) {
            .filter-panel {
                width: 300px;
            }
            
            .product-img-container {
                height: 180px;
            }
            
            .action-buttons {
                flex-direction: column;
                gap: 8px;
            }
            
            .view-detail-btn, .add-to-cart-btn {
                width: 100%;
            }
        }

        @media (max-width: 576px) {
            .filter-panel {
                width: 280px;
            }
            
            .product-img-container {
                height: 160px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-leaf me-2"></i>Fresh Harvest
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="#">Shop</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Contact</a>
                    </li>
                </ul>
                <div class="d-flex align-items-center">
                    <div class="search-box me-3">
                        <i class="fas fa-search"></i>
                        <input type="text" class="form-control" placeholder="Search products...">
                    </div>
                    <a href="#" class="btn btn-outline-primary me-2">
                        <i class="fas fa-user"></i>
                    </a>
                    <a href="#" class="btn btn-outline-primary position-relative">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                            3
                        </span>
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container py-5">
        <div class="row">
            <!-- Products Section -->
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h4 class="mb-0">Fresh Products</h4>
                    <div class="sort-dropdown">
                        <div class="dropdown">
                            <button class="btn dropdown-toggle" type="button" id="sortDropdown" data-bs-toggle="dropdown">
                                Sort by: Featured
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item active" href="#">Featured</a></li>
                                <li><a class="dropdown-item" href="#">Price: Low to High</a></li>
                                <li><a class="dropdown-item" href="#">Price: High to Low</a></li>
                                <li><a class="dropdown-item" href="#">Newest</a></li>
                                <li><a class="dropdown-item" href="#">Best Rating</a></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="row" id="productContainer">
                    <!-- Product cards will be dynamically inserted here -->
                </div>

                <!-- Pagination -->
                <nav aria-label="Page navigation" class="mt-5">
                    <ul class="pagination justify-content-center">
                        <li class="page-item disabled">
                            <a class="page-link" href="#" tabindex="-1">Previous</a>
                        </li>
                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item">
                            <a class="page-link" href="#">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>

    <!-- Filter Toggle Button -->
    <button class="filter-toggle-btn" id="filterToggleBtn">
        <i class="fas fa-sliders-h"></i>
        <span class="badge rounded-pill" id="activeFilterCount">0</span>
    </button>

    <!-- Filter Panel -->
    <div class="filter-panel" id="filterPanel">
        <button class="close-btn" id="closeFilterPanel">
            <i class="fas fa-times"></i>
        </button>
        <h4 class="mb-4">Filter Products</h4>
        
        <div class="filter-section">
            <h5 class="filter-title">Categories</h5>
            <div class="mb-3">
                <div class="d-flex flex-wrap">
                    <button class="category-tag active" data-category="all">All Products</button>
                    <button class="category-tag" data-category="fruits">Fruits</button>
                    <button class="category-tag" data-category="vegetables">Vegetables</button>
                    <button class="category-tag" data-category="juices">Fresh Juices</button>
                    <button class="category-tag" data-category="organic">Organic</button>
                </div>
            </div>
        </div>

        <div class="filter-section">
            <h5 class="filter-title">Price Range</h5>
            <div class="mb-3">
                <input type="range" class="form-range" id="priceRange" min="0" max="100" step="5" value="100">
                <div class="d-flex justify-content-between">
                    <span>$0</span>
                    <span id="maxPriceValue">$100</span>
                </div>
            </div>
        </div>

        <div class="filter-section">
            <h5 class="filter-title">Availability</h5>
            <div class="form-check form-switch mb-2">
                <input class="form-check-input" type="checkbox" id="inStock" checked>
                <label class="form-check-label" for="inStock">In Stock Only</label>
            </div>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="outOfStock">
                <label class="form-check-label" for="outOfStock">Include Out of Stock</label>
            </div>
        </div>

        <div class="filter-section">
            <h5 class="filter-title">Dietary</h5>
            <div class="form-check form-switch mb-2">
                <input class="form-check-input" type="checkbox" id="organicFilter">
                <label class="form-check-label" for="organicFilter">Organic Only</label>
            </div>
            <div class="form-check form-switch mb-2">
                <input class="form-check-input" type="checkbox" id="glutenFree">
                <label class="form-check-label" for="glutenFree">Gluten Free</label>
            </div>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="vegan">
                <label class="form-check-label" for="vegan">Vegan</label>
            </div>
        </div>

        <button class="apply-filters-btn" id="applyFiltersBtn">
            <i class="fas fa-check me-2"></i>Apply Filters
        </button>
    </div>

    <!-- Filter Overlay -->
    <div class="filter-overlay" id="filterOverlay"></div>

    <!-- Footer -->
    <footer class="bg-dark text-white py-5">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-4">
                    <h5 class="mb-3">Fresh Harvest</h5>
                    <p>Delivering farm-fresh fruits, vegetables and juices straight to your doorstep since 2010.</p>
                    <div class="social-icons">
                        <a href="#" class="text-white me-2"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-white me-2"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-white me-2"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-white"><i class="fab fa-pinterest"></i></a>
                    </div>
                </div>
                <div class="col-md-2 mb-4">
                    <h5 class="mb-3">Shop</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-white">Fruits</a></li>
                        <li><a href="#" class="text-white">Vegetables</a></li>
                        <li><a href="#" class="text-white">Juices</a></li>
                        <li><a href="#" class="text-white">Organic</a></li>
                        <li><a href="#" class="text-white">Seasonal</a></li>
                    </ul>
                </div>
                <div class="col-md-2 mb-4">
                    <h5 class="mb-3">Help</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-white">FAQs</a></li>
                        <li><a href="#" class="text-white">Shipping</a></li>
                        <li><a href="#" class="text-white">Returns</a></li>
                        <li><a href="#" class="text-white">Contact</a></li>
                    </ul>
                </div>
                <div class="col-md-4 mb-4">
                    <h5 class="mb-3">Newsletter</h5>
                    <p>Subscribe to get updates on new products and special offers.</p>
                    <div class="input-group mb-3">
                        <input type="email" class="form-control" placeholder="Your email">
                        <button class="btn btn-primary" type="button">Subscribe</button>
                    </div>
                </div>
            </div>
            <hr class="my-4">
            <div class="row">
                <div class="col-md-6">
                    <p class="mb-0">&copy; 2023 Fresh Harvest. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <a href="#" class="text-white me-3">Privacy Policy</a>
                    <a href="#" class="text-white me-3">Terms of Service</a>
                    <a href="#" class="text-white">Sitemap</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Product Detail Modal -->
    <div class="modal fade" id="productDetailModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="productDetailModalLabel">Product Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="productDetailContent">
                    <!-- Content will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Sample product data
        const products = [
            {
                id: 1,
                name: "Organic Apples",
                category: "fruits",
                price: 2.99,
                oldPrice: 3.49,
                image: "https://images.unsplash.com/photo-1568702846914-96b305d2aaeb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                rating: 4.5,
                stock: 10,
                organic: true,
                description: "Crisp and juicy organic apples grown without synthetic pesticides or fertilizers. Perfect for snacking or baking.",
                benefits: "High in fiber, vitamin C, and antioxidants. Supports heart health and digestion."
            },
            {
                id: 2,
                name: "Fresh Carrots",
                category: "vegetables",
                price: 1.49,
                oldPrice: 1.99,
                image: "https://images.unsplash.com/photo-1447175008436-054170c2e979?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                rating: 4.2,
                stock: 15,
                organic: false,
                description: "Sweet and crunchy carrots, perfect for salads, snacks, or cooking. Locally grown and freshly harvested.",
                benefits: "Rich in beta-carotene, fiber, vitamin K1, and antioxidants. Good for eye health."
            },
            {
                id: 3,
                name: "Orange Juice",
                category: "juices",
                price: 4.99,
                oldPrice: 5.49,
                image: "https://images.unsplash.com/photo-1615486364181-d0f0d928c8f4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                rating: 4.7,
                stock: 8,
                organic: true,
                description: "100% pure squeezed orange juice with no added sugars or preservatives. Packed with vitamin C.",
                benefits: "Boosts immune system, improves skin health, and provides natural energy."
            },
            {
                id: 4,
                name: "Organic Spinach",
                category: "vegetables",
                price: 3.29,
                oldPrice: 3.99,
                image: "https://images.unsplash.com/photo-1576045057995-568f588f82fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                rating: 4.3,
                stock: 12,
                organic: true,
                description: "Tender organic spinach leaves, perfect for salads, smoothies, or cooking. Grown with sustainable methods.",
                benefits: "High in iron, calcium, magnesium, and vitamins A, C, and K. Supports bone health."
            },
            {
                id: 5,
                name: "Strawberries",
                category: "fruits",
                price: 3.99,
                oldPrice: 4.49,
                image: "https://images.unsplash.com/photo-1464965911861-746a04b4bca6?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                rating: 4.8,
                stock: 0,
                organic: false,
                description: "Sweet and juicy strawberries, perfect for desserts, smoothies, or fresh eating. Picked at peak ripeness.",
                benefits: "Rich in antioxidants, vitamin C, manganese, and folate. May help regulate blood sugar."
            },
            {
                id: 6,
                name: "Green Juice",
                category: "juices",
                price: 5.49,
                oldPrice: 5.99,
                image: "https://images.unsplash.com/photo-1542843137-8791a6904d14?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                rating: 4.6,
                stock: 7,
                organic: true,
                description: "Nutrient-packed green juice with kale, spinach, cucumber, apple, and lemon. Cold-pressed for maximum nutrition.",
                benefits: "Detoxifying, alkalizing, and packed with vitamins, minerals, and chlorophyll."
            },
            {
                id: 7,
                name: "Organic Tomatoes",
                category: "vegetables",
                price: 2.79,
                oldPrice: 3.29,
                image: "https://images.unsplash.com/photo-1594282408481-4f5430e8fcfc?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                rating: 4.4,
                stock: 14,
                organic: true,
                description: "Vine-ripened organic tomatoes with rich flavor and perfect texture. Great for salads, sauces, or sandwiches.",
                benefits: "Excellent source of lycopene, vitamin C, potassium, and folate. Supports heart health."
            },
            {
                id: 8,
                name: "Bananas",
                category: "fruits",
                price: 0.99,
                oldPrice: 1.29,
                image: "https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",
                rating: 4.1,
                stock: 20,
                organic: false,
                description: "Naturally sweet bananas, a perfect energy-boosting snack. Rich in potassium and easy to digest.",
                benefits: "High in potassium, vitamin B6, and fiber. Supports heart health and digestion."
            }
        ];

        // Current filter state
        let currentFilters = {
            category: 'all',
            maxPrice: 100,
            inStock: true,
            outOfStock: false,
            organic: false,
            glutenFree: false,
            vegan: false
        };

        // Function to render products
        function renderProducts(productsToRender) {
            const productContainer = document.getElementById('productContainer');
            productContainer.innerHTML = '';

            if (productsToRender.length === 0) {
                productContainer.innerHTML = '<div class="col-12 text-center py-5"><h5>No products found matching your criteria</h5><p>Try adjusting your filters</p></div>';
                return;
            }

            productsToRender.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'col-md-6 col-lg-4';
                productCard.innerHTML = `
                    <div class="card product-card h-100">
                        ${product.stock === 0 ? '<span class="product-badge">Out of Stock</span>' : ''}
                        ${product.organic ? '<span class="product-badge organic-badge">Organic</span>' : ''}
                        <div class="product-img-container">
                            <img src="${product.image}" class="product-img" alt="${product.name}">
                        </div>
                        <div class="card-body">
                            <h5 class="product-title">${product.name}</h5>
                            <p class="product-category text-capitalize">${product.category}</p>
                            <div class="product-rating mb-2">
                                ${generateRatingStars(product.rating)}
                                <small class="text-muted ms-1">(${product.rating})</small>
                            </div>
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <span class="product-price">$${product.price.toFixed(2)}</span>
                                    ${product.oldPrice ? `<span class="product-old-price">$${product.oldPrice.toFixed(2)}</span>` : ''}
                                </div>
                                ${product.stock > 0 ? `<span class="text-success"><small>In Stock (${product.stock})</small></span>` : '<span class="text-danger"><small>Out of Stock</small></span>'}
                            </div>
                        </div>
                        <div class="card-footer bg-white border-0 pt-0">
                            <div class="action-buttons">
                                <button class="btn view-detail-btn" onclick="showProductDetail(${product.id})">
                                    <i class="fas fa-eye me-1"></i> View
                                </button>
                                <button class="btn add-to-cart-btn" ${product.stock === 0 ? 'disabled' : ''} onclick="addToCart(${product.id})">
                                    <i class="fas fa-shopping-cart me-1"></i> Add
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                productContainer.appendChild(productCard);
            });
        }

        // Function to generate rating stars
        function generateRatingStars(rating) {
            let stars = '';
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            
            for (let i = 0; i < fullStars; i++) {
                stars += '<i class="fas fa-star"></i>';
            }
            
            if (hasHalfStar) {
                stars += '<i class="fas fa-star-half-alt"></i>';
            }
            
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
            for (let i = 0; i < emptyStars; i++) {
                stars += '<i class="far fa-star"></i>';
            }
            
            return stars;
        }

        // Function to show product details in modal
        function showProductDetail(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const modalContent = document.getElementById('productDetailContent');
            modalContent.innerHTML = `
                <div class="row">
                    <div class="col-md-6">
                        <img src="${product.image}" class="img-fluid rounded" alt="${product.name}">
                    </div>
                    <div class="col-md-6">
                        <h3>${product.name}</h3>
                        <div class="product-rating mb-3">
                            ${generateRatingStars(product.rating)}
                            <small class="text-muted ms-1">(${product.rating} rating)</small>
                        </div>
                        <div class="d-flex align-items-center mb-3">
                            <h4 class="mb-0 text-primary">$${product.price.toFixed(2)}</h4>
                            ${product.oldPrice ? `<del class="text-muted ms-2">$${product.oldPrice.toFixed(2)}</del>` : ''}
                            ${product.organic ? '<span class="badge bg-success ms-2">Organic</span>' : ''}
                        </div>
                        <p class="mb-4">${product.description}</p>
                        <h5>Health Benefits:</h5>
                        <p>${product.benefits}</p>
                        <div class="d-flex align-items-center mt-4">
                            <div class="quantity-control me-4">
                                <button class="quantity-btn" onclick="adjustQuantity(${product.id}, -1)">-</button>
                                <input type="text" class="quantity-input" id="quantity-${product.id}" value="1" readonly>
                                <button class="quantity-btn" onclick="adjustQuantity(${product.id}, 1)">+</button>
                            </div>
                            <button class="btn btn-primary btn-lg" ${product.stock === 0 ? 'disabled' : ''} onclick="addToCart(${product.id}, document.getElementById('quantity-${product.id}').value)">
                                <i class="fas fa-shopping-cart me-2"></i> Add to Cart
                            </button>
                        </div>
                        <div class="mt-3">
                            ${product.stock > 0 ? 
                                `<span class="text-success"><i class="fas fa-check-circle me-1"></i> In Stock (${product.stock} available)</span>` : 
                                '<span class="text-danger"><i class="fas fa-times-circle me-1"></i> Out of Stock</span>'}
                        </div>
                    </div>
                </div>
            `;

            const modal = new bootstrap.Modal(document.getElementById('productDetailModal'));
            modal.show();
        }

        // Function to adjust quantity
        function adjustQuantity(productId, change) {
            const quantityInput = document.getElementById(`quantity-${productId}`);
            let quantity = parseInt(quantityInput.value) + change;
            if (quantity < 1) quantity = 1;
            
            const product = products.find(p => p.id === productId);
            if (product && quantity > product.stock) {
                quantity = product.stock;
            }
            
            quantityInput.value = quantity;
        }

        // Function to add to cart
        function addToCart(productId, quantity = 1) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            if (product.stock === 0) {
                alert('This product is out of stock');
                return;
            }

            // In a real app, you would add to cart logic here
            alert(`Added ${quantity} ${product.name}(s) to cart`);
            console.log(`Added to cart: ${product.name} x${quantity}`);
        }

        // Function to filter products
        function filterProducts() {
            let filteredProducts = products.filter(product => {
                // Category filter
                if (currentFilters.category !== 'all' && 
                    (currentFilters.category !== 'organic' && product.category !== currentFilters.category) &&
                    (currentFilters.category === 'organic' && !product.organic)) {
                    return false;
                }
                
                // Price filter
                if (product.price > currentFilters.maxPrice) {
                    return false;
                }
                
                // Stock filter
                if ((currentFilters.inStock && !currentFilters.outOfStock && product.stock === 0) || 
                    (!currentFilters.inStock && currentFilters.outOfStock && product.stock > 0)) {
                    return false;
                }
                
                // Organic filter
                if (currentFilters.organic && !product.organic) {
                    return false;
                }
                
                // Other dietary filters would go here
                
                return true;
            });
            
            renderProducts(filteredProducts);
            updateActiveFilterCount();
        }

        // Function to update active filter count badge
        function updateActiveFilterCount() {
            let count = 0;
            
            // Count category filter if not 'all'
            if (currentFilters.category !== 'all') count++;
            
            // Count price filter if not max
            if (currentFilters.maxPrice < 100) count++;
            
            // Count stock filters
            if (!currentFilters.inStock || currentFilters.outOfStock) count++;
            
            // Count other filters
            if (currentFilters.organic) count++;
            if (currentFilters.glutenFree) count++;
            if (currentFilters.vegan) count++;
            
            const badge = document.getElementById('activeFilterCount');
            badge.textContent = count;
            badge.style.display = count > 0 ? 'block' : 'none';
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Render all products initially
            renderProducts(products);
            
            // Set up filter toggle button
            const filterToggleBtn = document.getElementById('filterToggleBtn');
            const filterPanel = document.getElementById('filterPanel');
            const closeFilterPanel = document.getElementById('closeFilterPanel');
            const filterOverlay = document.getElementById('filterOverlay');
            const applyFiltersBtn = document.getElementById('applyFiltersBtn');
            
            filterToggleBtn.addEventListener('click', function() {
                filterPanel.classList.add('show');
                filterOverlay.classList.add('show');
                document.body.style.overflow = 'hidden';
            });
            
            closeFilterPanel.addEventListener('click', function() {
                filterPanel.classList.remove('show');
                filterOverlay.classList.remove('show');
                document.body.style.overflow = '';
            });
            
            filterOverlay.addEventListener('click', function() {
                filterPanel.classList.remove('show');
                filterOverlay.classList.remove('show');
                document.body.style.overflow = '';
            });
            
            // Set up category filter buttons
            document.querySelectorAll('.category-tag').forEach(tag => {
                tag.addEventListener('click', function() {
                    document.querySelectorAll('.category-tag').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    currentFilters.category = this.dataset.category;
                });
            });
            
            // Set up price range filter
            const priceRange = document.getElementById('priceRange');
            const maxPriceValue = document.getElementById('maxPriceValue');
            
            priceRange.addEventListener('input', function() {
                currentFilters.maxPrice = parseInt(this.value);
                maxPriceValue.textContent = `$${this.value}`;
            });
            
            // Set up stock filters
            document.getElementById('inStock').addEventListener('change', function() {
                currentFilters.inStock = this.checked;
            });
            
            document.getElementById('outOfStock').addEventListener('change', function() {
                currentFilters.outOfStock = this.checked;
            });
            
            // Set up dietary filters
            document.getElementById('organicFilter').addEventListener('change', function() {
                currentFilters.organic = this.checked;
            });
            
            document.getElementById('glutenFree').addEventListener('change', function() {
                currentFilters.glutenFree = this.checked;
            });
            
            document.getElementById('vegan').addEventListener('change', function() {
                currentFilters.vegan = this.checked;
            });
            
            // Apply filters button
            applyFiltersBtn.addEventListener('click', function() {
                filterProducts();
                filterPanel.classList.remove('show');
                filterOverlay.classList.remove('show');
                document.body.style.overflow = '';
            });
            
            // Search functionality
            document.querySelector('.search-box input').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const filtered = products.filter(product => 
                    product.name.toLowerCase().includes(searchTerm) || 
                    product.category.toLowerCase().includes(searchTerm)
                );
                renderProducts(filtered);
            });
            
            // Sort dropdown functionality
            document.querySelectorAll('.sort-dropdown .dropdown-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    document.querySelectorAll('.sort-dropdown .dropdown-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    document.getElementById('sortDropdown').textContent = `Sort by: ${this.textContent}`;
                    
                    let sortedProducts = [...products];
                    switch(this.textContent) {
                        case 'Price: Low to High':
                            sortedProducts.sort((a, b) => a.price - b.price);
                            break;
                        case 'Price: High to Low':
                            sortedProducts.sort((a, b) => b.price - a.price);
                            break;
                        case 'Newest':
                            // Assuming newer products have higher IDs
                            sortedProducts.sort((a, b) => b.id - a.id);
                            break;
                        case 'Best Rating':
                            sortedProducts.sort((a, b) => b.rating - a.rating);
                            break;
                        default: // Featured
                            // No sorting needed
                            break;
                    }
                    
                    renderProducts(sortedProducts);
                });
            });
            
            // Initialize filter count badge
            updateActiveFilterCount();
        });
    </script>
</body>
</html>